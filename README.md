# 国科大杭高院宿舍秒杀脚本

免责声明：本脚本仅用于测试与逆向学习。禁止用于未经授权的自动化抢占、绕过验证码或规避任何安全/使用条款。作者不对因使用本脚本造成的任何法律责任或损失承担责任。

2025.8.8 国科大杭高院抢宿舍用脚本，适配不同学院、性别。

## 用法

从源码运行或者运行exe

### 关于参数

- 抢跑时间 目前来看不影响，可以按需填大
- 请求速率 服务器存在rps限制，目前测试0.1有些人能过有些人会频繁，猜测和机器性能有关，稳妥起见可以提前测试或者调大点

## 接口

包含常用接口一些易混淆字段解释

### 登录

- 密码使用AES-ECB加密并转换为base64编码，密钥为`shuangqibestbest`
- 获取验证码使用的uuid为前端生成，并且不校验验证码是否匹配
- 登录成功返回的token需要在请求头中携带

### 获取活动信息

- 通过`API._get_divideID`方法请求后端api获取divideID，为用户分类，猜测为（学院，性别）
- 此api同时会携带秒杀开始时间的Unix时间戳

### 获取可选寝室

- 通过`API._get_drom_pos`获取可选寝室列表
- 之后有一系列方法按不同粒度解析

### 获取可选床位

- 通过`API.get_bed_list`获取目标寝室床位

### 提交床位

- 核心api，用于锁下床位，目前不知道请求成功的包长什么样
- `aircondition` 字段在杭高应该用不上，js源码是绑到一个html标签上的，杭高没有这个选项，默认为`''`
- `chooseWay` 源码写死为1
- `beddingInfo` 买不买大礼包
- `bedPlaceCode` 通过床位算法编码而来，同样使用AES-ECB加密，密钥为`shu`+提交这个api携带的时间戳

### 收藏床位

- `bedCodes` 该寝室所有可选床位编码
- `bedPlaceCode` 床位id
- `beddingInfo` 大礼包选项json序列化结果

### 查看收藏

- `modelId` 默认为dm，意义不明

### 删除床位

- `id`,`code` 都会在查看收藏api中携带

## 油猴脚本

本仓库附带了一个用于hook获取项目开始时间api的油猴脚本，用于调试网页与提交床位api分析，使用前请将两个`end`与`start`修改为合理的值。
也许修改系统时间也可以做到相同的效果。

## 警告

`api.py`中附带了一串被注释的代码，用于获取所有床位收藏情况，该代码存在问题，请确保您有对应的debug能力再启用这段代码，不然可能要和主播一样打电话了。
